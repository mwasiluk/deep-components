
<link rel="import" href="../odc-d3-datalet/odc-d3-datalet.html">


<dom-module id="scatterplot-matrix-datalet">
    <template>
        <style is="custom-style">
            :host ::content #scatterplot-placeholder {
                width: 100%;

                background: #ffffff;
                position: relative;
            }
        </style>
        <odc-d3-datalet id="charts" data-url="{{dataUrl}}" fields="{{fields}}" title="{{title}}" description="{{description}}" export_menu="{{export_menu}}" data="{{data}}"></odc-d3-datalet>
    </template>
    <script>

        var ScatterplotMatrixBehavior = {
            presentData: function () {

                var self =this;
                var conf = {
                    guides: true,
                    brush: true,
                    tooltip: true,
                    margin:{
                        left: 50
                    }
                };
                if(this.properties.groupKey){
                    conf.groups= {
                        key: this.properties.groupKey
                    }
                }

                if(self._component.cellSize){
                    conf.size=self._component.cellSize;
                }

                var plot = new ODCD3.ScatterPlotMatrix(this._component.$.charts.$.container, this.properties.data, conf);
            }
        };

        ScatterplotMatrixDatalet = Polymer({
            is: 'scatterplot-matrix-datalet',
            properties: {
                data: {
                    type: Array,
                    value: undefined
                },
                cellSize: {
                    type: Number,
                    value: undefined
                },
                behavior : {
                    type : Object,
                    value : {}
                },
                /**
                 * Control the export menu
                 * xxxx BITMASK. FROM RIGHT : HTML, PNG, RTF, MY SPACE (eg. 1111 show all, 0000 hide all)
                 *
                 * @attribute export_menu
                 * @type Number
                 * @default 15
                 */
                export_menu : {
                    type  : Number,
                    value : 15 // xxxx BITMASK. FROM RIGHT : HTML, PNG, RTF, MY SPACE (eg. 1111 show all, 0000 hide all)
                }
            },

            /**
             * 'ready' callback extend the scatterchartComponentBehavior with HighchartsComponentBehavior and scatterchartBehavior
             * and run the Datalet workcycle.
             *
             * @method ready
             */
            ready: function(){
                this.behavior = $.extend(true, {}, OdcD3ComponentBehavior, ScatterplotMatrixBehavior);
                this.async(function(){this.behavior.init(this)},0);
            }
        });
    </script>
</dom-module>